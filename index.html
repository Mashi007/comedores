<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Comedores Industriales</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçΩÔ∏è</text></svg>">
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçΩÔ∏è</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçΩÔ∏è</text></svg>">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="utils.js"></script>
</head>
<body>
    <div id="toast-container"></div>
    
    <!-- Portada -->
    <div id="portada" class="screen active">
        <div class="portada-background">
            <div class="gradient-orb orb-1"></div>
            <div class="gradient-orb orb-2"></div>
            <div class="gradient-orb orb-3"></div>
        </div>
        <div class="portada-container">
            <div class="portada-content">
                <div class="portada-logo">üçΩÔ∏è</div>
                <h1 class="portada-title">
                    <span class="title-line">Sistema de Gesti√≥n</span>
                    <span class="title-line highlight">Comedores Industriales</span>
                </h1>
                <p class="portada-subtitle">Transforma la gesti√≥n de tu comedor con tecnolog√≠a de vanguardia</p>
                <div class="portada-features">
                    <div class="feature-item">
                        <span class="feature-icon">üìä</span>
                        <span>Analytics en Tiempo Real</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ü§ñ</span>
                        <span>IA Integrada</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">‚ö°</span>
                        <span>Optimizaci√≥n Autom√°tica</span>
                    </div>
                </div>
                <button id="btnIniciar" class="btn-hero" type="button" onclick="cambiarPantalla('portada', 'menu'); return false;">
                    <span>Ingresar al Sistema</span>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <span class="logo-icon">üçΩÔ∏è</span>
                <div class="logo-text">
                    <span class="logo-title">Comedores</span>
                    <span class="logo-subtitle">Industrial</span>
                </div>
            </div>
            <button class="close-sidebar" onclick="toggleSidebar()" title="Cerrar men√∫">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <nav class="sidebar-nav">
            <a href="#" class="nav-item" onclick="navegar('menu'); return false;" data-section="menu">
                <span class="nav-icon">üè†</span>
                <span class="nav-text">Men√∫ Principal</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('dashboard'); return false;" data-section="dashboard">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">Dashboard</span>
                <span class="nav-badge">6</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('compras'); return false;" data-section="compras">
                <span class="nav-icon">üõí</span>
                <span class="nav-text">Compras</span>
                <span class="nav-new">Nuevo</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('inventario'); return false;" data-section="inventario">
                <span class="nav-icon">üì¶</span>
                <span class="nav-text">Inventario</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('planificacion'); return false;" data-section="planificacion">
                <span class="nav-icon">üìÖ</span>
                <span class="nav-text">Planificaci√≥n</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('produccion'); return false;" data-section="produccion">
                <span class="nav-icon">üë®‚Äçüç≥</span>
                <span class="nav-text">Producci√≥n</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('servicio'); return false;" data-section="servicio">
                <span class="nav-icon">üí¨</span>
                <span class="nav-text">Servicio al Cliente</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('notificaciones'); return false;" data-section="notificaciones">
                <span class="nav-icon">üîî</span>
                <span class="nav-text">Notificaciones</span>
                <span class="nav-badge">5</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('chat-ai'); return false;" data-section="chat-ai">
                <span class="nav-icon">ü§ñ</span>
                <span class="nav-text">Chat AI</span>
                <span class="nav-new">Nuevo</span>
            </a>
            <a href="#" class="nav-item" onclick="navegar('configuracion'); return false;" data-section="configuracion">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-text">Configuraci√≥n</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <div class="sidebar-user">
                <div class="user-avatar">U</div>
                <div class="user-info">
                    <span class="user-name">Usuario Demo</span>
                    <span class="user-role">Administrador</span>
                </div>
            </div>
            <button class="nav-item logout-btn" onclick="cerrarSesion(); return false;">
                <span class="nav-icon">üö™</span>
                <span class="nav-text">Cerrar Sesi√≥n</span>
            </button>
        </div>
    </div>

    <div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- Men√∫ Principal -->
    <div id="menu" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Men√∫ Principal</h1>
            </div>
            <div class="menu-grid">
                <div class="menu-card" onclick="navegar('dashboard')">
                    <div class="menu-icon">üìä</div>
                    <h3>Dashboard</h3>
                    <p>Visualizaci√≥n de m√©tricas y KPIs</p>
                </div>
                <div class="menu-card" onclick="navegar('compras')">
                    <div class="menu-icon">üõí</div>
                    <h3>Compras</h3>
                    <p>Gesti√≥n de compras y facturas</p>
                </div>
                <div class="menu-card" onclick="navegar('inventario')">
                    <div class="menu-icon">üì¶</div>
                    <h3>Inventario</h3>
                    <p>Control de inventario</p>
                </div>
                <div class="menu-card" onclick="navegar('planificacion')">
                    <div class="menu-icon">üìÖ</div>
                    <h3>Planificaci√≥n</h3>
                    <p>Planificaci√≥n de men√∫s</p>
                </div>
                <div class="menu-card" onclick="navegar('produccion')">
                    <div class="menu-icon">üë®‚Äçüç≥</div>
                    <h3>Producci√≥n</h3>
                    <p>Reporte de producci√≥n</p>
                </div>
                <div class="menu-card" onclick="navegar('servicio')">
                    <div class="menu-icon">üí¨</div>
                    <h3>Servicio al Cliente</h3>
                    <p>Encuestas y feedback</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Dashboard</h1>
            </div>
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Consumo de Inventario</h3>
                    <canvas id="chart1" width="400" height="250"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Distribuci√≥n de Compras</h3>
                    <canvas id="chart2" width="400" height="250"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Producci√≥n Diaria</h3>
                    <canvas id="chart3" width="400" height="250"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Top Productos</h3>
                    <canvas id="chart4" width="400" height="250"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Satisfacci√≥n</h3>
                    <canvas id="chart5" width="400" height="250"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Merma vs Planificado</h3>
                    <canvas id="chart6" width="400" height="250"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Otras pantallas b√°sicas -->
    <div id="compras" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Compras</h1>
            </div>
            <p>M√≥dulo de compras</p>
        </div>
    </div>

    <div id="inventario" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Inventario</h1>
            </div>
            <p>M√≥dulo de inventario</p>
        </div>
    </div>

    <div id="planificacion" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Planificaci√≥n</h1>
            </div>
            <p>M√≥dulo de planificaci√≥n</p>
        </div>
    </div>

    <div id="produccion" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Producci√≥n</h1>
            </div>
            <p>M√≥dulo de producci√≥n</p>
        </div>
    </div>

    <div id="servicio" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Servicio al Cliente</h1>
            </div>
            <p>M√≥dulo de servicio al cliente</p>
        </div>
    </div>

    <div id="notificaciones" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Notificaciones</h1>
            </div>
            <p>M√≥dulo de notificaciones</p>
        </div>
    </div>

    <!-- Notificaciones -->
    <div id="notificaciones" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Notificaciones y Alertas</h1>
                <button class="btn-primary" onclick="marcarTodasLeidas()">Marcar todas como le√≠das</button>
            </div>
            <div class="notificaciones-grid">
                <div class="notificacion-card urgente">
                    <div class="notificacion-header">
                        <span class="notificacion-icon">‚ö†Ô∏è</span>
                        <span class="notificacion-titulo">Inventario Cr√≠tico</span>
                        <span class="notificacion-badge">Urgente</span>
                    </div>
                    <div class="notificacion-body">
                        <p>El inventario de <strong>Frijoles</strong> ha alcanzado el nivel m√≠nimo. Stock actual: <strong>8 kg</strong> (M√≠nimo: 10 kg)</p>
                        <div class="notificacion-acciones">
                            <button class="btn-small" onclick="gestionarNotificacion('inventario-frijoles')">Gestionar Compra</button>
                            <button class="btn-small btn-secondary" onclick="marcarLeida('notif-1')">Marcar Le√≠da</button>
                        </div>
                    </div>
                    <div class="notificacion-footer">
                        <span class="notificacion-tiempo">Hace 15 minutos</span>
                    </div>
                </div>

                <div class="notificacion-card importante">
                    <div class="notificacion-header">
                        <span class="notificacion-icon">üìä</span>
                        <span class="notificacion-titulo">Consumo Superior al Planificado</span>
                        <span class="notificacion-badge">Importante</span>
                    </div>
                    <div class="notificacion-body">
                        <p>Se ha consumido <strong>15% m√°s de Arroz</strong> de lo planificado. Consumo: <strong>520 kg</strong> vs Planificado: <strong>450 kg</strong></p>
                        <div class="notificacion-acciones">
                            <button class="btn-small" onclick="gestionarNotificacion('consumo-arroz')">Ver Detalle</button>
                            <button class="btn-small btn-secondary" onclick="marcarLeida('notif-2')">Marcar Le√≠da</button>
                        </div>
                    </div>
                    <div class="notificacion-footer">
                        <span class="notificacion-tiempo">Hace 2 horas</span>
                    </div>
                </div>

                <div class="notificacion-card informativa">
                    <div class="notificacion-header">
                        <span class="notificacion-icon">üìÖ</span>
                        <span class="notificacion-titulo">Men√∫ del D√≠a Pendiente</span>
                        <span class="notificacion-badge">Informativa</span>
                    </div>
                    <div class="notificacion-body">
                        <p>El men√∫ para <strong>ma√±ana</strong> a√∫n no ha sido planificado. Se recomienda completar la planificaci√≥n antes de las 18:00</p>
                        <div class="notificacion-acciones">
                            <button class="btn-small" onclick="gestionarNotificacion('menu-pendiente')">Planificar Men√∫</button>
                            <button class="btn-small btn-secondary" onclick="marcarLeida('notif-3')">Marcar Le√≠da</button>
                        </div>
                    </div>
                    <div class="notificacion-footer">
                        <span class="notificacion-tiempo">Hace 4 horas</span>
                    </div>
                </div>

                <div class="notificacion-card importante">
                    <div class="notificacion-header">
                        <span class="notificacion-icon">üì¶</span>
                        <span class="notificacion-titulo">Pedido de Compra Pendiente</span>
                        <span class="notificacion-badge">Importante</span>
                    </div>
                    <div class="notificacion-body">
                        <p>Hay <strong>3 pedidos de compra</strong> pendientes de aprobaci√≥n. Total estimado: <strong>$12,450</strong></p>
                        <div class="notificacion-acciones">
                            <button class="btn-small" onclick="gestionarNotificacion('pedidos-pendientes')">Revisar Pedidos</button>
                            <button class="btn-small btn-secondary" onclick="marcarLeida('notif-4')">Marcar Le√≠da</button>
                        </div>
                    </div>
                    <div class="notificacion-footer">
                        <span class="notificacion-tiempo">Hace 6 horas</span>
                    </div>
                </div>

                <div class="notificacion-card informativa">
                    <div class="notificacion-header">
                        <span class="notificacion-icon">‚≠ê</span>
                        <span class="notificacion-titulo">Nueva Encuesta de Satisfacci√≥n</span>
                        <span class="notificacion-badge">Informativa</span>
                    </div>
                    <div class="notificacion-body">
                        <p>Se han recibido <strong>12 nuevas respuestas</strong> a la encuesta de satisfacci√≥n. Calificaci√≥n promedio: <strong>4.7/5</strong></p>
                        <div class="notificacion-acciones">
                            <button class="btn-small" onclick="gestionarNotificacion('encuestas-nuevas')">Ver Resultados</button>
                            <button class="btn-small btn-secondary" onclick="marcarLeida('notif-5')">Marcar Le√≠da</button>
                        </div>
                    </div>
                    <div class="notificacion-footer">
                        <span class="notificacion-tiempo">Hace 1 d√≠a</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat AI -->
    <div id="chat-ai" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>ü§ñ Asistente AI para Gesti√≥n de Comedores</h1>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="chat-message ai-message">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">
                            <div class="message-text">¬°Hola! Soy tu asistente AI para gesti√≥n de comedores. ¬øEn qu√© puedo ayudarte hoy?</div>
                            <div class="message-time">Ahora</div>
                        </div>
                    </div>
                    <div class="chat-message ai-message">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">
                            <div class="message-text">Puedo ayudarte con:<br>‚Ä¢ An√°lisis de consumo e inventario<br>‚Ä¢ Sugerencias de men√∫s<br>‚Ä¢ Optimizaci√≥n de compras<br>‚Ä¢ An√°lisis de satisfacci√≥n<br>‚Ä¢ Y mucho m√°s...</div>
                            <div class="message-time">Ahora</div>
                        </div>
                    </div>
                </div>
                <div class="chat-suggestions">
                    <button class="suggestion-btn" onclick="enviarMensajeAI('¬øC√≥mo puedo optimizar el consumo de arroz?')">üí° Optimizar consumo</button>
                    <button class="suggestion-btn" onclick="enviarMensajeAI('Sugiere un men√∫ para ma√±ana')">üìÖ Sugerir men√∫</button>
                    <button class="suggestion-btn" onclick="enviarMensajeAI('Analiza el inventario actual')">üì¶ Analizar inventario</button>
                    <button class="suggestion-btn" onclick="enviarMensajeAI('¬øQu√© productos debo comprar?')">üõí Recomendaciones de compra</button>
                </div>
                <div class="chat-input-container">
                    <input type="text" id="chatInput" class="chat-input" placeholder="Escribe tu pregunta..." onkeypress="if(event.key === 'Enter') enviarMensajeAI()">
                    <button class="chat-send-btn" onclick="enviarMensajeAI()">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 2L9 11M18 2L12 18L9 11M18 2L2 8L9 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="configuracion" class="screen">
        <div class="page-container">
            <div class="page-header">
                <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <h1>Configuraci√≥n</h1>
            </div>
            <p>M√≥dulo de configuraci√≥n</p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
